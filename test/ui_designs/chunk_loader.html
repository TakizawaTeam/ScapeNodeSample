<!-- element_space上での、DOMの仮装化技術による要素及びデータの読み込み -->

<div id="ChunkLoader">
  <style>
  #ChunkLoader{
    position: absolute; left: 0px; top: 0px;
    width:100%; height:100%;
  }
  #ChunkLoader .layer.lattice_a{
    position: absolute; left: 0px; top: 0px;
    width:100%; height:100%;
    background-image: linear-gradient(#EEE 1px, transparent 0), linear-gradient(90deg, #EEE 1px, transparent 0);
    background-position: 0px 0px;
    background-size: 10px 10px;
  }
  #ChunkLoader .layer.lattice_b{
    position: absolute; left: 0px; top: 0px;
    width:100%; height:100%;
    background-image: linear-gradient(#DDD 2px, transparent 0), linear-gradient(90deg, #DDD 2px, transparent 0);
    background-position: 0px 0px;
    background-size: 50px 50px;
  }
  #ChunkLoader .layer.lattice_c{
    position: absolute; left: 0px; top: 0px;
    width:100%; height:100%;
    background-image: linear-gradient(#F00 1px, transparent 0), linear-gradient(90deg, #F00 1px, transparent 0);
    background-size: 500px 500px;
  }
  </style>

  <div class="layer lattice_a"></div>
  <div class="layer lattice_b"></div>
  <div class="layer lattice_c"></div>

  <script>
  initLattice = null;
  setPosition = null;
  window.onload = function(){
    const lattice_a = document.querySelector("#ChunkLoader .layer.lattice_a");
    const lattice_b = document.querySelector("#ChunkLoader .layer.lattice_b");
    const lattice_c = document.querySelector("#ChunkLoader .layer.lattice_c");

    changeLatticeSize = function(a=10, b=50, c=500){
      lattice_a.style.backgroundSize = `${a}px ${a}px`;
      lattice_b.style.backgroundSize = `${b}px ${b}px`;
      lattice_c.style.backgroundSize = `${c}px ${c}px`;
    }
    setLatticePosition = function(x,y){
      lattice_a.style.backgroundPosition = `${x%500}px ${y%500}px`;
      lattice_b.style.backgroundPosition = `${x%500}px ${y%500}px`;
      lattice_c.style.backgroundPosition = `${x%500}px ${y%500}px`;
    };
    changeLatticeSize();

    document.addEventListener('mousemove', function(e){
      setLatticePosition(e.clientX, e.clientY);
    });
  };
  </script>
</div>
